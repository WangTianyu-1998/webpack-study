"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[439],{2757:(e,t,o)=>{o.d(t,{A:()=>p});var s=o(3060);const n=e=>((0,s.pushScopeId)("data-v-32996121"),e=e(),(0,s.popScopeId)(),e),a={class:"loading_container"},r=n((()=>(0,s.createElementVNode)("svg",{class:"load_ellipse",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,s.createElementVNode)("ellipse",{cx:"26",cy:"10",rx:"26",ry:"10",style:{fill:"#ddd",stroke:"none"}})],-1)));function l(e,t,o,n,l,i){return(0,s.openBlock)(),(0,s.createElementBlock)("div",a,[(0,s.createElementVNode)("div",{class:"load_img",style:(0,s.normalizeStyle)({backgroundPositionY:-l.positionY%7*2.5+"rem"})},null,4),r])}const i={data(){return{positionY:0,timer:null}},mounted(){this.timer=setInterval((()=>{this.positionY++}),600)},beforeDestroy(){clearInterval(this.timer)}};var c=o(4621);const d=(0,c.A)(i,[["render",l],["__scopeId","data-v-32996121"]]),p=d},4065:(e,t,o)=>{o.d(t,{A:()=>k});var s=o(3060);const n=e=>((0,s.pushScopeId)("data-v-149e3d30"),e=e(),(0,s.popScopeId)(),e),a={class:"rating_container"},r={class:"star_container"},l=n((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"},null,-1))),i=[l],c={class:"star_container"},d=n((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"},null,-1))),p=[d];function m(e,t,o,n,l,d){return(0,s.openBlock)(),(0,s.createElementBlock)("div",a,[(0,s.createElementVNode)("section",r,[((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(5,(e=>(0,s.createElementVNode)("svg",{class:"grey_fill",key:e},i))),64))]),(0,s.createElementVNode)("div",{style:(0,s.normalizeStyle)("width:"+2*o.rating/5+"rem"),class:"star_overflow"},[(0,s.createElementVNode)("section",c,[((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(5,(e=>(0,s.createElementVNode)("svg",{class:"orange_fill",key:e},p))),64))])],4)])}const h={data(){return{}},mounted(){},props:["rating"]};var u=o(4621);const g=(0,u.A)(h,[["render",m],["__scopeId","data-v-149e3d30"]]),k=g},436:(e,t,o)=>{o.d(t,{A:()=>J});var s=o(3060);const n=o.p+"img/shopback.7019a6ca.svg",a=e=>((0,s.pushScopeId)("data-v-51bd231a"),e=e(),(0,s.popScopeId)(),e),r={class:"shoplist_container"},l={key:0,type:"1"},i=["src"],c={class:"shop_right"},d={class:"shop_detail_header"},p={class:"shop_detail_ul"},m={class:"rating_order_num"},h={class:"rating_order_num_left"},u={class:"rating_section"},g={class:"rating_num"},k={class:"order_section"},_={class:"rating_order_num_right"},y={key:0,class:"delivery_style delivery_left"},v={key:1,class:"delivery_style delivery_right"},E={class:"fee_distance"},f={class:"fee"},B=a((()=>(0,s.createElementVNode)("span",{class:"segmentation"},"/",-1))),N={class:"distance_time"},V={key:0},w=a((()=>(0,s.createElementVNode)("span",{class:"segmentation"},"/",-1))),S={key:1},b=a((()=>(0,s.createElementVNode)("span",{class:"segmentation"},"/",-1))),x={class:"order_time"},L={key:1,class:"animation_opactiy"},C=a((()=>(0,s.createElementVNode)("img",{src:n,class:"list_back_svg"},null,-1))),I=[C],A={key:2,class:"empty_data"},D=a((()=>(0,s.createElementVNode)("svg",{class:"back_top_svg"},[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#backtop"})],-1))),T=[D],F={ref:"abc",style:{"background-color":"red"}};function R(e,t,o,n,a,C){const D=(0,s.resolveComponent)("rating-star"),R=(0,s.resolveComponent)("router-link"),q=(0,s.resolveComponent)("loading"),P=(0,s.resolveDirective)("load-more");return(0,s.openBlock)(),(0,s.createElementBlock)("div",r,[a.shopListArr.length?(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createElementBlock)("ul",l,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.shopListArr,(e=>((0,s.openBlock)(),(0,s.createBlock)(R,{to:{path:"shop",query:{geohash:o.geohash,id:e.id}},tag:"li",key:e.id,class:"shop_li"},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("section",null,[(0,s.createElementVNode)("img",{src:a.imgBaseUrl+e.image_path,class:"shop_img"},null,8,i)]),(0,s.createElementVNode)("hgroup",c,[(0,s.createElementVNode)("header",d,[(0,s.createElementVNode)("h4",{class:(0,s.normalizeClass)([e.is_premium?"premium":"","shop_title ellipsis"])},(0,s.toDisplayString)(e.name),3),(0,s.createElementVNode)("ul",p,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.supports,(e=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:e.id,class:"supports"},(0,s.toDisplayString)(e.icon_name),1)))),128))])]),(0,s.createElementVNode)("h5",m,[(0,s.createElementVNode)("section",h,[(0,s.createElementVNode)("section",u,[(0,s.createVNode)(D,{rating:e.rating},null,8,["rating"]),(0,s.createElementVNode)("span",g,(0,s.toDisplayString)(e.rating),1)]),(0,s.createElementVNode)("section",k," 月售"+(0,s.toDisplayString)(e.recent_order_num)+"单 ",1)]),(0,s.createElementVNode)("section",_,[e.delivery_mode?((0,s.openBlock)(),(0,s.createElementBlock)("span",y,(0,s.toDisplayString)(e.delivery_mode.text),1)):(0,s.createCommentVNode)("",!0),C.zhunshi(e.supports)?((0,s.openBlock)(),(0,s.createElementBlock)("span",v,"准时达")):(0,s.createCommentVNode)("",!0)])]),(0,s.createElementVNode)("h5",E,[(0,s.createElementVNode)("p",f,[(0,s.createTextVNode)(" ¥"+(0,s.toDisplayString)(e.float_minimum_order_amount)+"起送 ",1),B,(0,s.createTextVNode)(" "+(0,s.toDisplayString)(e.piecewise_agent_fee.tips),1)]),(0,s.createElementVNode)("p",N,[Number(e.distance)?((0,s.openBlock)(),(0,s.createElementBlock)("span",V,[(0,s.createTextVNode)((0,s.toDisplayString)(e.distance>1e3?(e.distance/1e3).toFixed(2)+"km":e.distance+"m")+" ",1),w])):((0,s.openBlock)(),(0,s.createElementBlock)("span",S,(0,s.toDisplayString)(e.distance),1)),b,(0,s.createElementVNode)("span",x,(0,s.toDisplayString)(e.order_lead_time),1)])])])])),_:2},1032,["to"])))),128))])),[[P,C.loaderMore]]):((0,s.openBlock)(),(0,s.createElementBlock)("ul",L,[((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(10,(e=>(0,s.createElementVNode)("li",{class:"list_back_li",key:e},I))),64))])),a.touchend?((0,s.openBlock)(),(0,s.createElementBlock)("p",A,"没有更多了")):(0,s.createCommentVNode)("",!0),a.showBackStatus?((0,s.openBlock)(),(0,s.createElementBlock)("aside",{key:3,class:"return_top",onClick:t[0]||(t[0]=(...e)=>C.backTop&&C.backTop(...e))},T)):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",F,null,512),(0,s.createVNode)(s.Transition,{name:"loading"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createVNode)(q,null,null,512),[[s.vShow,a.showLoading]])])),_:1})])}var q=o(275),P=o(6497),z=o(9120),M=o(2467),U=o(9802),Y=o(2757),j=o(4065);const H={data(){return{offset:0,shopListArr:[],preventRepeatReuqest:!1,showBackStatus:!1,showLoading:!0,touchend:!1,imgBaseUrl:z.o8}},mounted(){this.initData()},components:{loading:Y.A,ratingStar:j.A},props:["restaurantCategoryId","restaurantCategoryIds","sortByType","deliveryMode","supportIds","confirmSelect","geohash"],mixins:[U.U,U.d],computed:{...(0,q.mapState)(["latitude","longitude"])},updated(){},methods:{async initData(){let e=await(0,P.fh)(this.latitude,this.longitude,this.offset,this.restaurantCategoryId);this.shopListArr=[...e],e.length<20&&(this.touchend=!0),this.hideLoading(),(0,M.H2)((e=>{this.showBackStatus=e}))},async loaderMore(){if(this.touchend)return;if(this.preventRepeatReuqest)return;this.showLoading=!0,this.preventRepeatReuqest=!0,this.offset+=20;let e=await(0,P.fh)(this.latitude,this.longitude,this.offset,this.restaurantCategoryId);this.hideLoading(),this.shopListArr=[...this.shopListArr,...e],e.length<20?this.touchend=!0:this.preventRepeatReuqest=!1},backTop(){(0,M.i0)(document.body,{scrollTop:"0"},400,"ease-out")},async listenPropChange(){this.showLoading=!0,this.offset=0;let e=await(0,P.fh)(this.latitude,this.longitude,this.offset,"",this.restaurantCategoryIds,this.sortByType,this.deliveryMode,this.supportIds);this.hideLoading(),this.shopListArr=[...e]},hideLoading(){this.showLoading=!1},zhunshi(e){let t;return e instanceof Array&&e.length?e.forEach((e=>{"准"===e.icon_name&&(t=!0)})):t=!1,t}},watch:{restaurantCategoryIds:function(e){this.listenPropChange()},sortByType:function(e){this.listenPropChange()},confirmSelect:function(e){this.listenPropChange()}}};var O=o(4621);const G=(0,O.A)(H,[["render",R],["__scopeId","data-v-51bd231a"]]),J=G},9802:(e,t,o)=>{o.d(t,{U:()=>n,d:()=>a});var s=o(2467);o(9120);const n={directives:{"load-more":{bind:(e,t)=>{let o,n,a,r,l,i,c,d,p=window.screen.height,m=e.attributes.type&&e.attributes.type.value,h=2;2==m?(c=e,d=e.children[0]):(c=document.body,d=e),e.addEventListener("touchstart",(()=>{o=d.clientHeight,n=e.offsetTop,a=(0,s.gd)(e,"paddingBottom"),r=(0,s.gd)(e,"marginBottom")}),!1),e.addEventListener("touchmove",(()=>{g()}),!1),e.addEventListener("touchend",(()=>{i=c.scrollTop,u()}),!1);const u=()=>{l=requestAnimationFrame((()=>{c.scrollTop!=i?(i=c.scrollTop,u()):(cancelAnimationFrame(l),o=d.clientHeight,g())}))},g=()=>{c.scrollTop+p>=o+n+a+r-h&&t.value()}}}}},a={methods:{getImgPath(e){let t;if(!e)return"//elm.cangdu.org/img/default.jpg";t=-1!==e.indexOf("jpeg")?".jpeg":".png";let o="/"+e.substr(0,1)+"/"+e.substr(1,2)+"/"+e.substr(3)+t;return"https://fuss10.elemecdn.com"+o}}}}}]);
//# sourceMappingURL=439.d7337551.js.map