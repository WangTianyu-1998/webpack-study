"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[197],{9102:(e,t,o)=>{o.d(t,{A:()=>m});var l=o(3060);const s=e=>((0,l.pushScopeId)("data-v-7a683c4e"),e=e(),(0,l.popScopeId)(),e),n={class:"alet_container"},i={class:"tip_text_container"},a=s((()=>(0,l.createElementVNode)("div",{class:"tip_icon"},[(0,l.createElementVNode)("span"),(0,l.createElementVNode)("span")],-1))),r={class:"tip_text"};function c(e,t,o,s,c,d){return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("section",i,[a,(0,l.createElementVNode)("p",r,(0,l.toDisplayString)(o.alertText),1),(0,l.createElementVNode)("div",{class:"confrim",onClick:t[0]||(t[0]=(...e)=>d.closeTip&&d.closeTip(...e))},"确认")])])}const d={data(){return{positionY:0,timer:null}},mounted(){},props:["alertText"],methods:{closeTip(){this.$emit("closeTip")}}};var h=o(4621);const p=(0,h.A)(d,[["render",c],["__scopeId","data-v-7a683c4e"]]),m=p},8724:(e,t,o)=>{o.d(t,{A:()=>N});var l=o(3060);const s=e=>((0,l.pushScopeId)("data-v-3a98f49d"),e=e(),(0,l.popScopeId)(),e),n={id:"head_top"},i=s((()=>(0,l.createElementVNode)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,l.createElementVNode)("polyline",{points:"12,18 4,9 12,0",style:{fill:"none",stroke:"rgb(255,255,255)","stroke-width":"2"}})],-1))),a=[i],r={key:0,class:"user_avatar"},c=s((()=>(0,l.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#user"},null,-1))),d=[c],h={key:1,class:"login_span"},p={key:2,class:"title_head ellipsis"},m={class:"title_text"};function u(e,t,o,s,i,c){const u=(0,l.resolveComponent)("router-link");return(0,l.openBlock)(),(0,l.createElementBlock)("header",n,[(0,l.renderSlot)(e.$slots,"logo",{},void 0,!0),(0,l.renderSlot)(e.$slots,"search",{},void 0,!0),o.goBack?((0,l.openBlock)(),(0,l.createElementBlock)("section",{key:0,class:"head_goback",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},a)):(0,l.createCommentVNode)("",!0),o.signinUp?((0,l.openBlock)(),(0,l.createBlock)(u,{key:1,to:e.userInfo?"/profile":"/login",class:"head_login"},{default:(0,l.withCtx)((()=>[e.userInfo?((0,l.openBlock)(),(0,l.createElementBlock)("svg",r,d)):((0,l.openBlock)(),(0,l.createElementBlock)("span",h,"登录|注册"))])),_:1},8,["to"])):(0,l.createCommentVNode)("",!0),o.headTitle?((0,l.openBlock)(),(0,l.createElementBlock)("section",p,[(0,l.createElementVNode)("span",m,(0,l.toDisplayString)(o.headTitle),1)])):(0,l.createCommentVNode)("",!0),(0,l.renderSlot)(e.$slots,"edit",{},void 0,!0),(0,l.renderSlot)(e.$slots,"msite-title",{},void 0,!0),(0,l.renderSlot)(e.$slots,"changecity",{},void 0,!0),(0,l.renderSlot)(e.$slots,"changeLogin",{},void 0,!0)])}var g=o(275);const v={data(){return{}},mounted(){this.getUserInfo()},props:["signinUp","headTitle","goBack"],computed:{...(0,g.mapState)(["userInfo"])},methods:{...(0,g.mapActions)(["getUserInfo"])}};var k=o(4621);const w=(0,k.A)(v,[["render",u],["__scopeId","data-v-3a98f49d"]]),N=w},7197:(e,t,o)=>{o.r(t),o.d(t,{default:()=>I});var l=o(3060);const s=e=>((0,l.pushScopeId)("data-v-2ebdacfb"),e=e(),(0,l.popScopeId)(),e),n={class:"loginContainer"},i={key:0,class:"loginForm"},a={class:"input_container phone_number"},r={class:"input_container"},c={key:1,class:"loginForm"},d={class:"input_container"},h={class:"input_container"},p=s((()=>(0,l.createElementVNode)("span",null,"abc",-1))),m=s((()=>(0,l.createElementVNode)("span",null,"...",-1))),u={class:"input_container captcha_code_container"},g={class:"img_change_img"},v=["src"],k=s((()=>(0,l.createElementVNode)("p",null,"看不清",-1))),w=s((()=>(0,l.createElementVNode)("p",null,"换一张",-1))),N=[k,w],C=s((()=>(0,l.createElementVNode)("p",{class:"login_tips"}," 温馨提示：未注册过的账号，登录时将自动注册 ",-1))),_=s((()=>(0,l.createElementVNode)("p",{class:"login_tips"}," 注册过的用户可凭账号密码登录 ",-1)));function V(e,t,o,s,k,w){const V=(0,l.resolveComponent)("head-top"),E=(0,l.resolveComponent)("router-link"),f=(0,l.resolveComponent)("alert-tip");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createVNode)(V,{"head-title":k.loginWay?"登录":"密码登录",goBack:"true"},null,8,["head-title"]),k.loginWay?((0,l.openBlock)(),(0,l.createElementBlock)("form",i,[(0,l.createElementVNode)("section",a,[(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",placeholder:"账号密码随便输入",name:"phone",maxlength:"11","onUpdate:modelValue":t[0]||(t[0]=e=>k.phoneNumber=e)},null,512),[[l.vModelText,k.phoneNumber]]),(0,l.withDirectives)((0,l.createElementVNode)("button",{onClick:t[1]||(t[1]=(0,l.withModifiers)(((...e)=>w.getVerifyCode&&w.getVerifyCode(...e)),["prevent"])),class:(0,l.normalizeClass)({right_phone_number:w.rightPhoneNumber})},"获取验证码",2),[[l.vShow,!k.computedTime]]),(0,l.withDirectives)((0,l.createElementVNode)("button",{onClick:t[2]||(t[2]=(0,l.withModifiers)((()=>{}),["prevent"]))},"已发送("+(0,l.toDisplayString)(k.computedTime)+"s)",513),[[l.vShow,k.computedTime]])]),(0,l.createElementVNode)("section",r,[(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",placeholder:"验证码",name:"mobileCode",maxlength:"6","onUpdate:modelValue":t[3]||(t[3]=e=>k.mobileCode=e)},null,512),[[l.vModelText,k.mobileCode]])])])):((0,l.openBlock)(),(0,l.createElementBlock)("form",c,[(0,l.createElementVNode)("section",d,[(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",placeholder:"账号","onUpdate:modelValue":t[4]||(t[4]=e=>k.userAccount=e)},null,512),[[l.vModelText,k.userAccount,void 0,{lazy:!0}]])]),(0,l.createElementVNode)("section",h,[k.showPassword?(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("input",{key:1,type:"text",placeholder:"密码","onUpdate:modelValue":t[6]||(t[6]=e=>k.passWord=e)},null,512)),[[l.vModelText,k.passWord]]):(0,l.withDirectives)(((0,l.openBlock)(),(0,l.createElementBlock)("input",{key:0,type:"password",placeholder:"密码","onUpdate:modelValue":t[5]||(t[5]=e=>k.passWord=e)},null,512)),[[l.vModelText,k.passWord]]),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["button_switch",{change_to_text:k.showPassword}])},[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(["circle_button",{trans_to_right:k.showPassword}]),onClick:t[7]||(t[7]=(...e)=>w.changePassWordType&&w.changePassWordType(...e))},null,2),p,m],2)]),(0,l.createElementVNode)("section",u,[(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",placeholder:"验证码",maxlength:"4","onUpdate:modelValue":t[8]||(t[8]=e=>k.codeNumber=e)},null,512),[[l.vModelText,k.codeNumber]]),(0,l.createElementVNode)("div",g,[(0,l.withDirectives)((0,l.createElementVNode)("img",{src:k.captchaCodeImg},null,8,v),[[l.vShow,k.captchaCodeImg]]),(0,l.createElementVNode)("div",{class:"change_img",onClick:t[9]||(t[9]=(...e)=>w.getCaptchaCode&&w.getCaptchaCode(...e))},N)])])])),C,_,(0,l.createElementVNode)("div",{class:"login_container",onClick:t[10]||(t[10]=(...e)=>w.mobileLogin&&w.mobileLogin(...e))},"登录"),k.loginWay?(0,l.createCommentVNode)("",!0):((0,l.openBlock)(),(0,l.createBlock)(E,{key:2,to:"/forget",class:"to_forget"},{default:(0,l.withCtx)((()=>[(0,l.createTextVNode)("重置密码？")])),_:1})),k.showAlert?((0,l.openBlock)(),(0,l.createBlock)(f,{key:3,showHide:k.showAlert,onCloseTip:w.closeTip,alertText:k.alertText},null,8,["showHide","onCloseTip","alertText"])):(0,l.createCommentVNode)("",!0)])}var E=o(8724),f=o(9102),T=(o(9120),o(275)),x=o(6497);const y={data(){return{loginWay:!1,showPassword:!1,phoneNumber:null,mobileCode:null,validate_token:null,computedTime:0,userInfo:null,userAccount:null,passWord:null,captchaCodeImg:null,codeNumber:null,showAlert:!1,alertText:null}},created(){this.getCaptchaCode()},components:{headTop:E.A,alertTip:f.A},computed:{rightPhoneNumber:function(){return/^1\d{10}$/gi.test(this.phoneNumber)}},methods:{...(0,T.mapMutations)(["RECORD_USERINFO"]),changeLoginWay(){this.loginWay=!this.loginWay},changePassWordType(){this.showPassword=!this.showPassword},async getCaptchaCode(){let e=await(0,x.CI)();this.captchaCodeImg=e.code},async getVerifyCode(){if(this.rightPhoneNumber){this.computedTime=30,this.timer=setInterval((()=>{this.computedTime--,0==this.computedTime&&clearInterval(this.timer)}),1e3);let e=await(0,x.Zh)(this.phoneNumber,"mobile");if(e.message)return this.showAlert=!0,void(this.alertText=e.message);if(!e.is_exists)return this.showAlert=!0,void(this.alertText="您输入的手机号尚未绑定");let t=await(0,x.wQ)(this.phoneNumber);if(t.message)return this.showAlert=!0,void(this.alertText=t.message);this.validate_token=t.validate_token}},async mobileLogin(){if(this.loginWay){if(!this.rightPhoneNumber)return this.showAlert=!0,void(this.alertText="手机号码不正确");if(!/^\d{6}$/gi.test(this.mobileCode))return this.showAlert=!0,void(this.alertText="短信验证码不正确");this.userInfo=await(0,x.sendLogin)(this.mobileCode,this.phoneNumber,this.validate_token)}else{if(!this.userAccount)return this.showAlert=!0,void(this.alertText="请输入手机号/邮箱/用户名");if(!this.passWord)return this.showAlert=!0,void(this.alertText="请输入密码");if(!this.codeNumber)return this.showAlert=!0,void(this.alertText="请输入验证码");this.userInfo=await(0,x.lu)(this.userAccount,this.passWord,this.codeNumber)}this.userInfo.user_id?(this.RECORD_USERINFO(this.userInfo),this.$router.go(-1)):(this.showAlert=!0,this.alertText=this.userInfo.message,this.loginWay||this.getCaptchaCode())},closeTip(){this.showAlert=!1}}};var b=o(4621);const B=(0,b.A)(y,[["render",V],["__scopeId","data-v-2ebdacfb"]]),I=B}}]);
//# sourceMappingURL=197.24d17e8b.js.map