"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[91],{1001:(e,t,o)=>{o.d(t,{A:()=>y});var s=o(3060);const i=e=>((0,s.pushScopeId)("data-v-1183baec"),e=e(),(0,s.popScopeId)(),e),a={class:"cart_module"},n={key:0,class:"cart_button"},l=i((()=>(0,s.createElementVNode)("svg",null,[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-minus"})],-1))),c=[l],r={key:0,class:"cart_num"},d=i((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-add"},null,-1))),m=[d],h={key:1,class:"choose_specification"},p={class:"choose_icon_container"},u=i((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-minus"},null,-1))),g=[u],_={key:0,class:"cart_num"};function f(e,t,o,i,l,d){return(0,s.openBlock)(),(0,s.createElementBlock)("section",a,[o.foods.specifications.length?((0,s.openBlock)(),(0,s.createElementBlock)("section",h,[(0,s.createElementVNode)("section",p,[(0,s.createVNode)(s.Transition,{name:"showReduce"},{default:(0,s.withCtx)((()=>[d.foodNum?((0,s.openBlock)(),(0,s.createElementBlock)("svg",{key:0,class:"specs_reduce_icon",onClick:t[2]||(t[2]=(...e)=>d.showReduceTip&&d.showReduceTip(...e))},g)):(0,s.createCommentVNode)("",!0)])),_:1}),(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[d.foodNum?((0,s.openBlock)(),(0,s.createElementBlock)("span",_,(0,s.toDisplayString)(d.foodNum),1)):(0,s.createCommentVNode)("",!0)])),_:1}),(0,s.createElementVNode)("span",{class:"show_chooselist",onClick:t[3]||(t[3]=e=>d.showChooseList(o.foods))},"选规格")])])):((0,s.openBlock)(),(0,s.createElementBlock)("section",n,[(0,s.createVNode)(s.Transition,{name:"showReduce"},{default:(0,s.withCtx)((()=>[d.foodNum?((0,s.openBlock)(),(0,s.createElementBlock)("span",{key:0,onClick:t[0]||(t[0]=e=>d.removeOutCart(o.foods.category_id,o.foods.item_id,o.foods.specfoods[0].food_id,o.foods.specfoods[0].name,o.foods.specfoods[0].price,"",o.foods.specfoods[0].packing_fee,o.foods.specfoods[0].sku_id,o.foods.specfoods[0].stock))},c)):(0,s.createCommentVNode)("",!0)])),_:1}),(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[d.foodNum?((0,s.openBlock)(),(0,s.createElementBlock)("span",r,(0,s.toDisplayString)(d.foodNum),1)):(0,s.createCommentVNode)("",!0)])),_:1}),((0,s.openBlock)(),(0,s.createElementBlock)("svg",{class:"add_icon",onClick:t[1]||(t[1]=e=>d.addToCart(o.foods.category_id,o.foods.item_id,o.foods.specfoods[0].food_id,o.foods.specfoods[0].name,o.foods.specfoods[0].price,"",o.foods.specfoods[0].packing_fee,o.foods.specfoods[0].sku_id,o.foods.specfoods[0].stock,e))},m))]))])}var k=o(275);const E={data(){return{showMoveDot:[]}},mounted(){},computed:{...(0,k.mapState)(["cartList"]),shopCart:function(){return Object.assign({},this.cartList[this.shopId])},foodNum:function(){let e=this.foods.category_id,t=this.foods.item_id;if(this.shopCart&&this.shopCart[e]&&this.shopCart[e][t]){let o=0;return Object.values(this.shopCart[e][t]).forEach(((e,t)=>{o+=e.num})),o}return 0}},props:["foods","shopId"],methods:{...(0,k.mapMutations)(["ADD_CART","REDUCE_CART"]),removeOutCart(e,t,o,s,i,a,n,l,c){this.foodNum>0&&this.REDUCE_CART({shopid:this.shopId,category_id:e,item_id:t,food_id:o,name:s,price:i,specs:a,packing_fee:n,sku_id:l,stock:c})},addToCart(e,t,o,s,i,a,n,l,c,r){this.ADD_CART({shopid:this.shopId,category_id:e,item_id:t,food_id:o,name:s,price:i,specs:a,packing_fee:n,sku_id:l,stock:c});let d=r.target.getBoundingClientRect().left,m=r.target.getBoundingClientRect().bottom;this.showMoveDot.push(!0),this.$emit("showMoveDot",this.showMoveDot,d,m)},showChooseList(e){this.$emit("showChooseList",e)},showReduceTip(){this.$emit("showReduceTip")}}};var N=o(4621);const w=(0,N.A)(E,[["render",f],["__scopeId","data-v-1183baec"]]),y=w},2757:(e,t,o)=>{o.d(t,{A:()=>m});var s=o(3060);const i=e=>((0,s.pushScopeId)("data-v-32996121"),e=e(),(0,s.popScopeId)(),e),a={class:"loading_container"},n=i((()=>(0,s.createElementVNode)("svg",{class:"load_ellipse",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,s.createElementVNode)("ellipse",{cx:"26",cy:"10",rx:"26",ry:"10",style:{fill:"#ddd",stroke:"none"}})],-1)));function l(e,t,o,i,l,c){return(0,s.openBlock)(),(0,s.createElementBlock)("div",a,[(0,s.createElementVNode)("div",{class:"load_img",style:(0,s.normalizeStyle)({backgroundPositionY:-l.positionY%7*2.5+"rem"})},null,4),n])}const c={data(){return{positionY:0,timer:null}},mounted(){this.timer=setInterval((()=>{this.positionY++}),600)},beforeDestroy(){clearInterval(this.timer)}};var r=o(4621);const d=(0,r.A)(c,[["render",l],["__scopeId","data-v-32996121"]]),m=d},4065:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(3060);const i=e=>((0,s.pushScopeId)("data-v-149e3d30"),e=e(),(0,s.popScopeId)(),e),a={class:"rating_container"},n={class:"star_container"},l=i((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"},null,-1))),c=[l],r={class:"star_container"},d=i((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"},null,-1))),m=[d];function h(e,t,o,i,l,d){return(0,s.openBlock)(),(0,s.createElementBlock)("div",a,[(0,s.createElementVNode)("section",n,[((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(5,(e=>(0,s.createElementVNode)("svg",{class:"grey_fill",key:e},c))),64))]),(0,s.createElementVNode)("div",{style:(0,s.normalizeStyle)("width:"+2*o.rating/5+"rem"),class:"star_overflow"},[(0,s.createElementVNode)("section",r,[((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(5,(e=>(0,s.createElementVNode)("svg",{class:"orange_fill",key:e},m))),64))])],4)])}const p={data(){return{}},mounted(){},props:["rating"]};var u=o(4621);const g=(0,u.A)(p,[["render",h],["__scopeId","data-v-149e3d30"]]),_=g},6152:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Tt});var s=o(3060);const i=o.p+"img/shop_back_svg.40f8ade5.svg",a=e=>((0,s.pushScopeId)("data-v-63170349"),e=e(),(0,s.popScopeId)(),e),n={key:0,class:"shop_container"},l=a((()=>(0,s.createElementVNode)("svg",{width:"4rem",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,s.createElementVNode)("polyline",{points:"12,18 4,9 12,0",style:{fill:"none",stroke:"rgb(255,255,255)","stroke-width":"3"}})],-1))),c=[l],r={class:"header_cover_img_con"},d=["src"],m={class:"description_header"},h={class:"description_left"},p=["src"],u={class:"description_right"},g={class:"description_title ellipsis"},_={class:"description_text"},f={class:"description_promotion ellipsis"},k=a((()=>(0,s.createElementVNode)("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"description_arrow"},[(0,s.createElementVNode)("path",{d:"M0 0 L8 7 L0 14",stroke:"#fff","stroke-width":"1",fill:"none"})],-1))),E={class:"ellipsis"},N=a((()=>(0,s.createElementVNode)("svg",{class:"footer_arrow"},[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-left"})],-1))),w={key:0,class:"activities_details"},y={class:"activities_shoptitle"},V={class:"activities_ratingstar"},v={class:"activities_list"},C=a((()=>(0,s.createElementVNode)("header",{class:"activities_title_style"},[(0,s.createElementVNode)("span",null,"优惠信息")],-1))),D={class:"activities_shopinfo"},B=a((()=>(0,s.createElementVNode)("header",{class:"activities_title_style"},[(0,s.createElementVNode)("span",null,"商家公告")],-1))),x=a((()=>(0,s.createElementVNode)("circle",{cx:"30",cy:"30",r:"25",stroke:"#555","stroke-width":"1",fill:"none"},null,-1))),S=a((()=>(0,s.createElementVNode)("line",{x1:"22",y1:"38",x2:"38",y2:"22",style:{stroke:"#999","stroke-width":"2"}},null,-1))),L=a((()=>(0,s.createElementVNode)("line",{x1:"22",y1:"22",x2:"38",y2:"38",style:{stroke:"#999","stroke-width":"2"}},null,-1))),T=[x,S,L],I={class:"change_show_type",ref:"chooseType"},A={class:"food_container"},F={class:"menu_container"},b={class:"menu_left",id:"wrapper_menu",ref:"wrapperMenu"},R=["onClick"],M=["src"],O={key:1,class:"category_num"},P={class:"menu_right",ref:"menuFoodList"},z={class:"menu_detail_header"},$={class:"menu_detail_header_left"},U={class:"menu_item_title"},H={class:"menu_item_description"},q=["onClick"],Y={key:0,class:"description_tip"},j={class:"menu_food_img"},G=["src"],J={class:"menu_food_description"},K={class:"food_description_head"},Q={class:"description_foodname"},W={key:0,class:"attributes_ul"},X={class:"food_description_content"},Z={class:"food_description_sale_rating"},ee={key:0,class:"food_activity"},te={class:"menu_detail_footer"},oe={class:"food_price"},se=a((()=>(0,s.createElementVNode)("span",null,"¥",-1))),ie={key:0},ae={class:"buy_cart_container"},ne={key:0,class:"cart_list_length"},le=a((()=>(0,s.createElementVNode)("svg",{class:"cart_icon"},[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-icon"})],-1))),ce={class:"cart_num"},re={key:0,class:"gotopay_button_style"},de={class:"cart_food_list"},me=a((()=>(0,s.createElementVNode)("h4",null,"购物车",-1))),he=a((()=>(0,s.createElementVNode)("svg",null,[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-remove"})],-1))),pe=a((()=>(0,s.createElementVNode)("span",{class:"clear_cart"},"清空",-1))),ue=[he,pe],ge={class:"cart_food_details",id:"cartFood"},_e={class:"cart_list_num"},fe={class:"ellipsis"},ke={class:"ellipsis"},Ee={class:"cart_list_price"},Ne=a((()=>(0,s.createElementVNode)("span",null,"¥",-1))),we={class:"cart_list_control"},ye=["onClick"],Ve=a((()=>(0,s.createElementVNode)("svg",null,[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-minus"})],-1))),ve=[Ve],Ce={class:"cart_num"},De=["onClick"],Be=a((()=>(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-add"},null,-1))),xe=[Be],Se={class:"rating_container",id:"ratingContainer"},Le={type:"2"},Te={class:"rating_header"},Ie={class:"rating_header_left"},Ae=a((()=>(0,s.createElementVNode)("p",null,"综合评价",-1))),Fe={class:"rating_header_right"},be=a((()=>(0,s.createElementVNode)("span",null,"服务态度",-1))),Re={class:"rating_num"},Me=a((()=>(0,s.createElementVNode)("span",null,"菜品评价",-1))),Oe={class:"rating_num"},Pe=a((()=>(0,s.createElementVNode)("span",null,"送达时间",-1))),ze={class:"delivery_time"},$e={class:"tag_list_ul"},Ue=["onClick"],He={class:"rating_list_ul"},qe=["src"],Ye={class:"rating_list_details"},je={class:"username_star"},Ge={class:"username"},Je={class:"star_desc"},Ke={class:"time_spent_desc"},Qe={class:"rated_at"},We={class:"food_img_ul"},Xe=["src"],Ze={class:"food_name_ul"},et={key:0,class:"specs_list"},tt={class:"specs_list_header"},ot={class:"ellipsis"},st=a((()=>(0,s.createElementVNode)("line",{x1:"0",y1:"0",x2:"16",y2:"16",stroke:"#666","stroke-width":"1.2"},null,-1))),it=a((()=>(0,s.createElementVNode)("line",{x1:"0",y1:"16",x2:"16",y2:"0",stroke:"#666","stroke-width":"1.2"},null,-1))),at=[st,it],nt={class:"specs_details"},lt={class:"specs_details_title"},ct=["onClick"],rt={class:"specs_footer"},dt={class:"specs_price"},mt=a((()=>(0,s.createElementVNode)("span",null,"¥ ",-1))),ht={key:0,class:"show_delete_tip"},pt={key:0,class:"move_dot"},ut=a((()=>(0,s.createElementVNode)("svg",{class:"move_liner"},[(0,s.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#cart-add"})],-1))),gt=[ut],_t={key:1,class:"animation_opactiy shop_back_svg_container"},ft=a((()=>(0,s.createElementVNode)("img",{src:i},null,-1))),kt=[ft];function Et(e,t,o,i,a,l){const x=(0,s.resolveComponent)("router-link"),S=(0,s.resolveComponent)("rating-star"),L=(0,s.resolveComponent)("buy-cart"),he=(0,s.resolveComponent)("loading"),pe=(0,s.resolveComponent)("router-view"),Ve=(0,s.resolveDirective)("load-more");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[a.showLoading?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("section",n,[(0,s.createElementVNode)("nav",{class:"goback",onClick:t[0]||(t[0]=(...e)=>l.goback&&l.goback(...e))},c),(0,s.createElementVNode)("header",{class:"shop_detail_header",ref:"shopheader",style:(0,s.normalizeStyle)({zIndex:a.showActivities?"14":"10"})},[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("img",{src:a.imgBaseUrl+a.shopDetailData.image_path,class:"header_cover_img"},null,8,d)]),(0,s.createElementVNode)("section",m,[(0,s.createVNode)(x,{to:"/shop/shopDetail",class:"description_top"},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("section",h,[(0,s.createElementVNode)("img",{src:a.imgBaseUrl+a.shopDetailData.image_path},null,8,p)]),(0,s.createElementVNode)("section",u,[(0,s.createElementVNode)("h4",g,(0,s.toDisplayString)(a.shopDetailData.name),1),(0,s.createElementVNode)("p",_," 商家配送／"+(0,s.toDisplayString)(a.shopDetailData.order_lead_time)+"分钟送达／配送费¥"+(0,s.toDisplayString)(a.shopDetailData.float_delivery_fee),1),(0,s.createElementVNode)("p",f,"公告："+(0,s.toDisplayString)(l.promotionInfo),1)]),k])),_:1}),a.shopDetailData.activities.length?((0,s.openBlock)(),(0,s.createElementBlock)("footer",{key:0,class:"description_footer",onClick:t[1]||(t[1]=(...e)=>l.showActivitiesFun&&l.showActivitiesFun(...e))},[(0,s.createElementVNode)("p",E,[(0,s.createElementVNode)("span",{class:"tip_icon",style:(0,s.normalizeStyle)({backgroundColor:"#"+a.shopDetailData.activities[0].icon_color,borderColor:"#"+a.shopDetailData.activities[0].icon_color})},(0,s.toDisplayString)(a.shopDetailData.activities[0].icon_name),5),(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(a.shopDetailData.activities[0].description)+"（APP专享）",1)]),(0,s.createElementVNode)("p",null,(0,s.toDisplayString)(a.shopDetailData.activities.length)+"个活动",1),N])):(0,s.createCommentVNode)("",!0)])],4),(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[a.showActivities?((0,s.openBlock)(),(0,s.createElementBlock)("section",w,[(0,s.createElementVNode)("h2",y,(0,s.toDisplayString)(a.shopDetailData.name),1),(0,s.createElementVNode)("h3",V,[(0,s.createVNode)(S,{rating:a.shopDetailData.rating},null,8,["rating"])]),(0,s.createElementVNode)("section",v,[C,(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.shopDetailData.activities,(e=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:e.id},[(0,s.createElementVNode)("span",{class:"activities_icon",style:(0,s.normalizeStyle)({backgroundColor:"#"+e.icon_color,borderColor:"#"+e.icon_color})},(0,s.toDisplayString)(e.icon_name),5),(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(e.description)+"（APP专享）",1)])))),128))])]),(0,s.createElementVNode)("section",D,[B,(0,s.createElementVNode)("p",null,(0,s.toDisplayString)(l.promotionInfo),1)]),((0,s.openBlock)(),(0,s.createElementBlock)("svg",{width:"60",height:"60",class:"close_activities",onClick:t[2]||(t[2]=(0,s.withModifiers)(((...e)=>l.showActivitiesFun&&l.showActivitiesFun(...e)),["stop"]))},T))])):(0,s.createCommentVNode)("",!0)])),_:1}),(0,s.createElementVNode)("section",I,[(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("span",{class:(0,s.normalizeClass)({activity_show:"food"==a.changeShowType}),onClick:t[3]||(t[3]=e=>a.changeShowType="food")},"商品",2)]),(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("span",{class:(0,s.normalizeClass)({activity_show:"rating"==a.changeShowType}),onClick:t[4]||(t[4]=e=>a.changeShowType="rating")},"评价",2)])],512),(0,s.createVNode)(s.Transition,{name:"fade-choose"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("section",A,[(0,s.createElementVNode)("section",F,[(0,s.createElementVNode)("section",b,[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.menuList,((t,o)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:o,class:(0,s.normalizeClass)(["menu_left_li",{activity_menu:o==a.menuIndex}]),onClick:e=>l.chooseMenu(o)},[t.icon_url?((0,s.openBlock)(),(0,s.createElementBlock)("img",{key:0,src:e.getImgPath(t.icon_url)},null,8,M)):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(t.name),1),a.categoryNum[o]&&1==t.type?((0,s.openBlock)(),(0,s.createElementBlock)("span",O,(0,s.toDisplayString)(a.categoryNum[o]),1)):(0,s.createCommentVNode)("",!0)],10,R)))),128))])],512),(0,s.createElementVNode)("section",P,[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.menuList,((t,o)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:o},[(0,s.createElementVNode)("header",z,[(0,s.createElementVNode)("section",$,[(0,s.createElementVNode)("strong",U,(0,s.toDisplayString)(t.name),1),(0,s.createElementVNode)("span",H,(0,s.toDisplayString)(t.description),1)]),(0,s.createElementVNode)("span",{class:"menu_detail_header_right",onClick:e=>l.showTitleDetail(o)},null,8,q),o==a.TitleDetailIndex?((0,s.openBlock)(),(0,s.createElementBlock)("p",Y,[(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(t.name),1),(0,s.createTextVNode)(" "+(0,s.toDisplayString)(t.description),1)])):(0,s.createCommentVNode)("",!0)]),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(t.foods,((t,o)=>((0,s.openBlock)(),(0,s.createElementBlock)("section",{key:o,class:"menu_detail_list"},[(0,s.createVNode)(x,{to:{path:"shop/foodDetail",query:{image_path:t.image_path,description:t.description,month_sales:t.month_sales,name:t.name,rating:t.rating,rating_count:t.rating_count,satisfy_rate:t.satisfy_rate,foods:t,shopId:a.shopId}},tag:"div",class:"menu_detail_link"},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("section",j,[(0,s.createElementVNode)("img",{src:a.imgBaseUrl+t.image_path},null,8,G)]),(0,s.createElementVNode)("section",J,[(0,s.createElementVNode)("h3",K,[(0,s.createElementVNode)("strong",Q,(0,s.toDisplayString)(t.name),1),t.attributes.length?((0,s.openBlock)(),(0,s.createElementBlock)("ul",W,[e.attribute?((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,{key:0},(0,s.renderList)(t.attributes,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t,style:(0,s.normalizeStyle)({color:"#"+e.icon_color,borderColor:"#"+e.icon_color}),class:(0,s.normalizeClass)({attribute_new:"新"==e.icon_name})},[(0,s.createElementVNode)("p",{style:(0,s.normalizeStyle)({color:"新"==e.icon_name?"#fff":"#"+e.icon_color})},(0,s.toDisplayString)("新"==e.icon_name?"新品":e.icon_name),5)],6)))),128)):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)]),(0,s.createElementVNode)("p",X,(0,s.toDisplayString)(t.description),1),(0,s.createElementVNode)("p",Z,[(0,s.createElementVNode)("span",null,"月售"+(0,s.toDisplayString)(t.month_sales)+"份",1),(0,s.createElementVNode)("span",null,"好评率"+(0,s.toDisplayString)(t.satisfy_rate)+"%",1)]),t.activity?((0,s.openBlock)(),(0,s.createElementBlock)("p",ee,[(0,s.createElementVNode)("span",{style:(0,s.normalizeStyle)({color:"#"+t.activity.image_text_color,borderColor:"#"+t.activity.icon_color})},(0,s.toDisplayString)(t.activity.image_text),5)])):(0,s.createCommentVNode)("",!0)])])),_:2},1032,["to"]),(0,s.createElementVNode)("footer",te,[(0,s.createElementVNode)("section",oe,[se,(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(t.specfoods[0].price),1),t.specifications.length?((0,s.openBlock)(),(0,s.createElementBlock)("span",ie,"起")):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(L,{shopId:a.shopId,foods:t,onMoveInCart:l.listenInCart,onShowChooseList:l.showChooseList,onShowReduceTip:l.showReduceTip,onShowMoveDot:l.showMoveDotFun},null,8,["shopId","foods","onMoveInCart","onShowChooseList","onShowReduceTip","onShowMoveDot"])])])))),128))])))),128))])],512)]),(0,s.createElementVNode)("section",ae,[(0,s.createElementVNode)("section",{onClick:t[5]||(t[5]=(...e)=>l.toggleCartList&&l.toggleCartList(...e)),class:"cart_icon_num"},[(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["cart_icon_container",{cart_icon_activity:a.totalPrice>0,move_in_cart:a.receiveInCart}]),ref:"cartContainer"},[l.totalNum?((0,s.openBlock)(),(0,s.createElementBlock)("span",ne,(0,s.toDisplayString)(l.totalNum),1)):(0,s.createCommentVNode)("",!0),le],2),(0,s.createElementVNode)("div",ce,[(0,s.createElementVNode)("div",null,"¥ "+(0,s.toDisplayString)(a.totalPrice),1),(0,s.createElementVNode)("div",null,"配送费¥"+(0,s.toDisplayString)(l.deliveryFee),1)])]),(0,s.createElementVNode)("section",{class:(0,s.normalizeClass)(["gotopay",{gotopay_acitvity:l.minimumOrderAmount<=0}])},[l.minimumOrderAmount>0?((0,s.openBlock)(),(0,s.createElementBlock)("span",re,"还差¥"+(0,s.toDisplayString)(l.minimumOrderAmount)+"起送",1)):((0,s.openBlock)(),(0,s.createBlock)(x,{key:1,to:{path:"/confirmOrder",query:{geohash:a.geohash,shopId:a.shopId}},class:"gotopay_button_style"},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)("去结算")])),_:1},8,["to"]))],2)]),(0,s.createVNode)(s.Transition,{name:"toggle-cart"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("section",de,[(0,s.createElementVNode)("header",null,[me,(0,s.createElementVNode)("div",{onClick:t[6]||(t[6]=(...e)=>l.clearCart&&l.clearCart(...e))},ue)]),(0,s.createElementVNode)("section",ge,[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.cartFoodList,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t,class:"cart_food_li"},[(0,s.createElementVNode)("div",_e,[(0,s.createElementVNode)("p",fe,(0,s.toDisplayString)(e.name),1),(0,s.createElementVNode)("p",ke,(0,s.toDisplayString)(e.specs),1)]),(0,s.createElementVNode)("div",Ee,[Ne,(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(e.price),1)]),(0,s.createElementVNode)("section",we,[(0,s.createElementVNode)("span",{onClick:t=>l.removeOutCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs)},ve,8,ye),(0,s.createElementVNode)("span",Ce,(0,s.toDisplayString)(e.num),1),((0,s.openBlock)(),(0,s.createElementBlock)("svg",{class:"cart_add",onClick:t=>l.addToCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs)},xe,8,De))])])))),128))])])],512),[[s.vShow,a.showCartList&&a.cartFoodList.length]])])),_:1}),(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("div",{class:"screen_cover",onClick:t[7]||(t[7]=(...e)=>l.toggleCartList&&l.toggleCartList(...e))},null,512),[[s.vShow,a.showCartList&&a.cartFoodList.length]])])),_:1})],512),[[s.vShow,"food"==a.changeShowType]])])),_:1}),(0,s.createVNode)(s.Transition,{name:"fade-choose"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("section",Se,[(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createElementBlock)("section",Le,[(0,s.createElementVNode)("section",null,[(0,s.createElementVNode)("header",Te,[(0,s.createElementVNode)("section",Ie,[(0,s.createElementVNode)("p",null,(0,s.toDisplayString)(a.shopDetailData.rating),1),Ae,(0,s.createElementVNode)("p",null,"高于周边商家"+(0,s.toDisplayString)((100*a.ratingScoresData.compare_rating).toFixed(1))+"%",1)]),(0,s.createElementVNode)("section",Fe,[(0,s.createElementVNode)("p",null,[be,(0,s.createVNode)(S,{rating:a.ratingScoresData.service_score},null,8,["rating"]),(0,s.createElementVNode)("span",Re,(0,s.toDisplayString)(a.ratingScoresData.service_score.toFixed(1)),1)]),(0,s.createElementVNode)("p",null,[Me,(0,s.createVNode)(S,{rating:a.ratingScoresData.food_score},null,8,["rating"]),(0,s.createElementVNode)("span",Oe,(0,s.toDisplayString)(a.ratingScoresData.food_score.toFixed(1)),1)]),(0,s.createElementVNode)("p",null,[Pe,(0,s.createElementVNode)("span",ze,(0,s.toDisplayString)(a.shopDetailData.order_lead_time)+"分钟",1)])])]),(0,s.createElementVNode)("ul",$e,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.ratingTagsList,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t,class:(0,s.normalizeClass)({unsatisfied:e.unsatisfied,tagActivity:a.ratingTageIndex==t}),onClick:o=>l.changeTgeIndex(t,e.name)},(0,s.toDisplayString)(e.name)+"("+(0,s.toDisplayString)(e.count)+")",11,Ue)))),128))]),(0,s.createElementVNode)("ul",He,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.ratingList,((t,o)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:o,class:"rating_list_li"},[(0,s.createElementVNode)("img",{src:e.getImgPath(t.avatar),class:"user_avatar"},null,8,qe),(0,s.createElementVNode)("section",Ye,[(0,s.createElementVNode)("header",null,[(0,s.createElementVNode)("section",je,[(0,s.createElementVNode)("p",Ge,(0,s.toDisplayString)(t.username),1),(0,s.createElementVNode)("p",Je,[(0,s.createVNode)(S,{rating:t.rating_star},null,8,["rating"]),(0,s.createElementVNode)("span",Ke,(0,s.toDisplayString)(t.time_spent_desc),1)])]),(0,s.createElementVNode)("time",Qe,(0,s.toDisplayString)(t.rated_at),1)]),(0,s.createElementVNode)("ul",We,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(t.item_ratings,((t,o)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:o},[t.image_hash?((0,s.openBlock)(),(0,s.createElementBlock)("img",{key:0,src:e.getImgPath(t.image_hash)},null,8,Xe)):(0,s.createCommentVNode)("",!0)])))),128))]),(0,s.createElementVNode)("ul",Ze,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(t.item_ratings,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t,class:"ellipsis"},(0,s.toDisplayString)(e.food_name),1)))),128))])])])))),128))])])])),[[Ve,l.loaderMoreRating]])],512),[[s.vShow,"rating"==a.changeShowType]])])),_:1})])),(0,s.createElementVNode)("section",null,[(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[a.showSpecs?((0,s.openBlock)(),(0,s.createElementBlock)("div",{key:0,class:"specs_cover",onClick:t[8]||(t[8]=(...e)=>l.showChooseList&&l.showChooseList(...e))})):(0,s.createCommentVNode)("",!0)])),_:1}),(0,s.createVNode)(s.Transition,{name:"fadeBounce"},{default:(0,s.withCtx)((()=>[a.showSpecs?((0,s.openBlock)(),(0,s.createElementBlock)("div",et,[(0,s.createElementVNode)("header",tt,[(0,s.createElementVNode)("h4",ot,(0,s.toDisplayString)(a.choosedFoods.name),1),((0,s.openBlock)(),(0,s.createElementBlock)("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"specs_cancel",onClick:t[9]||(t[9]=(...e)=>l.showChooseList&&l.showChooseList(...e))},at))]),(0,s.createElementVNode)("section",nt,[(0,s.createElementVNode)("h5",lt,(0,s.toDisplayString)(a.choosedFoods.specifications[0].name),1),(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.choosedFoods.specifications[0].values,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{class:(0,s.normalizeClass)({specs_activity:t==a.specsIndex}),onClick:e=>l.chooseSpecs(t)},(0,s.toDisplayString)(e),11,ct)))),256))])]),(0,s.createElementVNode)("footer",rt,[(0,s.createElementVNode)("div",dt,[mt,(0,s.createElementVNode)("span",null,(0,s.toDisplayString)(a.choosedFoods.specfoods[a.specsIndex].price),1)]),(0,s.createElementVNode)("div",{class:"specs_addto_cart",onClick:t[10]||(t[10]=e=>l.addSpecs(a.choosedFoods.category_id,a.choosedFoods.item_id,a.choosedFoods.specfoods[a.specsIndex].food_id,a.choosedFoods.specfoods[a.specsIndex].name,a.choosedFoods.specfoods[a.specsIndex].price,a.choosedFoods.specifications[0].values[a.specsIndex],a.choosedFoods.specfoods[a.specsIndex].packing_fee,a.choosedFoods.specfoods[a.specsIndex].sku_id,a.choosedFoods.specfoods[a.specsIndex].stock))}," 加入购物车")])])):(0,s.createCommentVNode)("",!0)])),_:1})]),(0,s.createVNode)(s.Transition,{name:"fade"},{default:(0,s.withCtx)((()=>[a.showDeleteTip?((0,s.openBlock)(),(0,s.createElementBlock)("p",ht,"多规格商品只能去购物车删除哦")):(0,s.createCommentVNode)("",!0)])),_:1}),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.showMoveDot,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(s.Transition,{appear:"",onAfterAppear:l.afterEnter,onBeforeAppear:l.beforeEnter},{default:(0,s.withCtx)((()=>[e?((0,s.openBlock)(),(0,s.createElementBlock)("span",pt,gt)):(0,s.createCommentVNode)("",!0)])),_:2},1032,["onAfterAppear","onBeforeAppear"])))),256)),(0,s.withDirectives)((0,s.createVNode)(he,null,null,512),[[s.vShow,a.showLoading||a.loadRatings]]),a.showLoading?((0,s.openBlock)(),(0,s.createElementBlock)("section",_t,kt)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(s.Transition,{name:"router-slid",mode:"out-in"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(pe)])),_:1})])}var Nt=o(275),wt=o(6497),yt=o(2757),Vt=o(1001),vt=o(4065),Ct=o(9802),Dt=o(9120),Bt=o(3210);const xt={data(){return{geohash:"",shopId:null,showLoading:!0,changeShowType:"food",shopDetailData:null,showActivities:!1,menuList:[],menuIndex:0,menuIndexChange:!0,shopListTop:[],TitleDetailIndex:null,categoryNum:[],totalPrice:0,cartFoodList:[],showCartList:!1,receiveInCart:!1,ratingList:null,ratingOffset:0,ratingScoresData:null,ratingTagsList:null,ratingTageIndex:0,preventRepeatRequest:!1,ratingTagName:"",loadRatings:!1,foodScroll:null,showSpecs:!1,specsIndex:0,choosedFoods:null,showDeleteTip:!1,showMoveDot:[],windowHeight:null,elLeft:0,elBottom:0,ratingScroll:null,imgBaseUrl:Dt.o8}},created(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.id,this.INIT_BUYCART()},mounted(){this.initData(),this.windowHeight=window.innerHeight},beforeDestroy(){},mixins:[Ct.U,Ct.d],components:{loading:yt.A,ratingStar:vt.A,buyCart:Vt.A},computed:{...(0,Nt.mapState)(["latitude","longitude","cartList"]),promotionInfo:function(){return this.shopDetailData.promotion_info||"欢迎光临，用餐高峰期请提前下单，谢谢。"},deliveryFee:function(){return this.shopDetailData?this.shopDetailData.float_delivery_fee:null},minimumOrderAmount:function(){return this.shopDetailData?this.shopDetailData.float_minimum_order_amount-this.totalPrice:null},shopCart:function(){return{...this.cartList[this.shopId]}},totalNum:function(){let e=0;return this.cartFoodList.forEach((t=>{e+=t.num})),e}},methods:{...(0,Nt.mapMutations)(["RECORD_ADDRESS","ADD_CART","REDUCE_CART","INIT_BUYCART","CLEAR_CART","RECORD_SHOPDETAIL"]),async initData(){if(!this.latitude){let e=await(0,wt.bR)(this.geohash);this.RECORD_ADDRESS(e)}this.shopDetailData=await(0,wt.PF)(this.shopId,this.latitude,this.longitude),this.menuList=await(0,wt.Ye)(this.shopId),this.ratingList=await(0,wt.gO)(this.shopId,this.ratingOffset),this.ratingScoresData=await(0,wt.ln)(this.shopId),this.ratingTagsList=await(0,wt.zB)(this.shopId),this.RECORD_SHOPDETAIL(this.shopDetailData),this.hideLoading()},getFoodListHeight(){const e=this.$refs.menuFoodList;if(e){const t=Array.from(e.children[0].children);t.forEach(((e,t)=>{this.shopListTop[t]=e.offsetTop})),this.listenScroll(e)}},listenScroll(e){this.foodScroll=new Bt.A(e,{probeType:3,deceleration:.001,bounce:!1,swipeTime:2e3,click:!0});const t=new Bt.A("#wrapper_menu",{click:!0}),o=this.$refs.wrapperMenu.clientHeight;this.foodScroll.on("scroll",(e=>{this.$refs.wrapperMenu&&this.shopListTop.forEach(((s,i)=>{if(this.menuIndexChange&&Math.abs(Math.round(e.y))>=s){this.menuIndex=i;const e=this.$refs.wrapperMenu.querySelectorAll(".activity_menu"),s=e[0];t.scrollToElement(s,800,0,-(o/2-50))}}))}))},showActivitiesFun(){this.showActivities=!this.showActivities},chooseMenu(e){this.menuIndex=e,this.menuIndexChange=!1,this.foodScroll.scrollTo(0,-this.shopListTop[e],400),this.foodScroll.on("scrollEnd",(()=>{this.menuIndexChange=!0}))},showTitleDetail(e){this.TitleDetailIndex==e?this.TitleDetailIndex=null:this.TitleDetailIndex=e},addToCart(e,t,o,s,i,a){this.ADD_CART({shopid:this.shopId,category_id:e,item_id:t,food_id:o,name:s,price:i,specs:a})},removeOutCart(e,t,o,s,i,a){this.REDUCE_CART({shopid:this.shopId,category_id:e,item_id:t,food_id:o,name:s,price:i,specs:a})},initCategoryNum(){let e=[],t=0;this.totalPrice=0,this.cartFoodList=[],this.menuList.forEach(((o,s)=>{if(this.shopCart&&this.shopCart[o.foods[0].category_id]){let i=0;Object.keys(this.shopCart[o.foods[0].category_id]).forEach((e=>{Object.keys(this.shopCart[o.foods[0].category_id][e]).forEach((s=>{let a=this.shopCart[o.foods[0].category_id][e][s];i+=a.num,1==o.type&&(this.totalPrice+=a.num*a.price,a.num>0&&(this.cartFoodList[t]={},this.cartFoodList[t].category_id=o.foods[0].category_id,this.cartFoodList[t].item_id=e,this.cartFoodList[t].food_id=s,this.cartFoodList[t].num=a.num,this.cartFoodList[t].price=a.price,this.cartFoodList[t].name=a.name,this.cartFoodList[t].specs=a.specs,t++))}))})),e[s]=i}else e[s]=0})),this.totalPrice=this.totalPrice.toFixed(2),this.categoryNum=[...e]},toggleCartList(){!this.cartFoodList.length||(this.showCartList=!this.showCartList)},clearCart(){this.toggleCartList(),this.CLEAR_CART(this.shopId)},listenInCart(){this.receiveInCart||(this.receiveInCart=!0,this.$refs.cartContainer.addEventListener("animationend",(()=>{this.receiveInCart=!1})),this.$refs.cartContainer.addEventListener("webkitAnimationEnd",(()=>{this.receiveInCart=!1})))},async changeTgeIndex(e,t){this.ratingTageIndex=e,this.ratingOffset=0,this.ratingTagName=t;let o=await(0,wt.gO)(this.shopId,this.ratingOffset,t);this.ratingList=[...o],this.$nextTick((()=>{this.ratingScroll.refresh()}))},async loaderMoreRating(){if(this.preventRepeatRequest)return;this.loadRatings=!0,this.preventRepeatRequest=!0,this.ratingOffset+=10;let e=await(0,wt.gO)(this.shopId,this.ratingOffset,this.ratingTagName);this.ratingList=[...this.ratingList,...e],this.loadRatings=!1,e.length>=10&&(this.preventRepeatRequest=!1)},hideLoading(){this.showLoading=!1},showChooseList(e){e&&(this.choosedFoods=e),this.showSpecs=!this.showSpecs,this.specsIndex=0},chooseSpecs(e){this.specsIndex=e},addSpecs(e,t,o,s,i,a,n,l,c){this.ADD_CART({shopid:this.shopId,category_id:e,item_id:t,food_id:o,name:s,price:i,specs:a,packing_fee:n,sku_id:l,stock:c}),this.showChooseList()},showReduceTip(){this.showDeleteTip=!0,clearTimeout(this.timer),this.timer=setTimeout((()=>{clearTimeout(this.timer),this.showDeleteTip=!1}),3e3)},showMoveDotFun(e,t,o){this.showMoveDot=[...this.showMoveDot,...e],this.elLeft=t,this.elBottom=o},beforeEnter(e){e.style.transform=`translate3d(0,${37+this.elBottom-this.windowHeight}px,0)`,e.children[0].style.transform=`translate3d(${this.elLeft-30}px,0,0)`,e.children[0].style.opacity=0},afterEnter(e){e.style.transform="translate3d(0,0,0)",e.children[0].style.transform="translate3d(0,0,0)",e.style.transition="transform .55s cubic-bezier(0.3, -0.25, 0.7, -0.15)",e.children[0].style.transition="transform .55s linear",this.showMoveDot=this.showMoveDot.map((e=>!1)),e.children[0].style.opacity=1,e.children[0].addEventListener("transitionend",(()=>{this.listenInCart()})),e.children[0].addEventListener("webkitAnimationEnd",(()=>{this.listenInCart()}))},goback(){this.$router.go(-1)}},watch:{showLoading:function(e){e||this.$nextTick((()=>{this.getFoodListHeight(),this.initCategoryNum()}))},shopCart:function(e){this.initCategoryNum()},cartFoodList:function(e){e.length||(this.showCartList=!1)},changeShowType:function(e){"rating"===e&&this.$nextTick((()=>{this.ratingScroll=new Bt.A("#ratingContainer",{probeType:3,deceleration:.003,bounce:!1,swipeTime:2e3,click:!0}),this.ratingScroll.on("scroll",(e=>{Math.abs(Math.round(e.y))>=Math.abs(Math.round(this.ratingScroll.maxScrollY))&&(this.loaderMoreRating(),this.ratingScroll.refresh())}))}))}}};var St=o(4621);const Lt=(0,St.A)(xt,[["render",Et],["__scopeId","data-v-63170349"]]),Tt=Lt},9802:(e,t,o)=>{o.d(t,{U:()=>i,d:()=>a});var s=o(2467);o(9120);const i={directives:{"load-more":{bind:(e,t)=>{let o,i,a,n,l,c,r,d,m=window.screen.height,h=e.attributes.type&&e.attributes.type.value,p=2;2==h?(r=e,d=e.children[0]):(r=document.body,d=e),e.addEventListener("touchstart",(()=>{o=d.clientHeight,i=e.offsetTop,a=(0,s.gd)(e,"paddingBottom"),n=(0,s.gd)(e,"marginBottom")}),!1),e.addEventListener("touchmove",(()=>{g()}),!1),e.addEventListener("touchend",(()=>{c=r.scrollTop,u()}),!1);const u=()=>{l=requestAnimationFrame((()=>{r.scrollTop!=c?(c=r.scrollTop,u()):(cancelAnimationFrame(l),o=d.clientHeight,g())}))},g=()=>{r.scrollTop+m>=o+i+a+n-p&&t.value()}}}}},a={methods:{getImgPath(e){let t;if(!e)return"//elm.cangdu.org/img/default.jpg";t=-1!==e.indexOf("jpeg")?".jpeg":".png";let o="/"+e.substr(0,1)+"/"+e.substr(1,2)+"/"+e.substr(3)+t;return"https://fuss10.elemecdn.com"+o}}}}}]);
//# sourceMappingURL=91.50ef028a.js.map