"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[654],{3097:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var r=s(3060);const a=e=>((0,r.pushScopeId)("data-v-28445d52"),e=e(),(0,r.popScopeId)(),e),l={class:"paddingTop search_page"},o={class:"search_form"},c={key:0},i=a((()=>(0,r.createElementVNode)("h4",{class:"title_restaurant"},"商家",-1))),n={class:"list_container"},h={class:"item_left"},m=["src"],d={class:"item_right"},p={class:"item_right_text"},u=a((()=>(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"24",height:"14",class:"pay_icon"},[(0,r.createElementVNode)("polygon",{points:"0,14 4,0 24,0 20,14",style:{fill:"none",stroke:"#FF6000","stroke-width":"1"}}),(0,r.createElementVNode)("line",{x1:"1.5",y1:"12",x2:"20",y2:"12",style:{stroke:"#FF6000","stroke-width":"1.5"}}),(0,r.createElementVNode)("text",{x:"3.5",y:"9",style:{fill:"#FF6000","font-size":"9","font-weight":"bold"}},"支付")],-1))),y={class:"item_right_detail"},k=a((()=>(0,r.createElementVNode)("span",{class:"only_phone"},"(手机客户端专享)",-1))),g={key:1,class:"search_history"},V=a((()=>(0,r.createElementVNode)("h4",{class:"title_restaurant"},"搜索历史",-1))),E=["onClick"],_=["onClick"],N=a((()=>(0,r.createElementVNode)("line",{x1:"8",y1:"8",x2:"18",y2:"18",style:{stroke:"#999","stroke-width":"3"}},null,-1))),H=a((()=>(0,r.createElementVNode)("line",{x1:"18",y1:"8",x2:"8",y2:"18",style:{stroke:"#999","stroke-width":"3"}},null,-1))),B=[N,H],w={key:2,class:"search_none"};function v(e,t,s,a,N,H){const v=(0,r.resolveComponent)("head-top"),f=(0,r.resolveComponent)("router-link"),C=(0,r.resolveComponent)("foot-guide");return(0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createVNode)(v,{"head-title":"搜索",goBack:"true"}),(0,r.createElementVNode)("form",o,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"search",name:"search",placeholder:"请输入商家或美食名称",class:"search_input","onUpdate:modelValue":t[0]||(t[0]=e=>N.searchValue=e),onInput:t[1]||(t[1]=(...e)=>H.checkInput&&H.checkInput(...e))},null,544),[[r.vModelText,N.searchValue]]),(0,r.createElementVNode)("input",{type:"submit",name:"submit",class:"search_submit",onClick:t[2]||(t[2]=(0,r.withModifiers)((e=>H.searchTarget("")),["prevent"]))})]),N.restaurantList.length?((0,r.openBlock)(),(0,r.createElementBlock)("section",c,[i,(0,r.createElementVNode)("ul",n,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(N.restaurantList,(e=>((0,r.openBlock)(),(0,r.createBlock)(f,{to:{path:"/shop",query:{id:e.id}},tag:"li",key:e.id,class:"list_li"},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("section",h,[(0,r.createElementVNode)("img",{src:N.imgBaseUrl+e.image_path,class:"restaurant_img"},null,8,m)]),(0,r.createElementVNode)("section",d,[(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("p",null,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.name),1),u]),(0,r.createElementVNode)("p",null,"月售 "+(0,r.toDisplayString)(e.month_sales||e.recent_order_num)+" 单",1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.delivery_fee||e.float_minimum_order_amount)+" 元起送 / 距离"+(0,r.toDisplayString)(e.distance),1)]),(0,r.createElementVNode)("ul",y,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.restaurant_activity,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:e.id},[(0,r.createElementVNode)("span",{style:(0,r.normalizeStyle)({backgroundColor:"#"+e.icon_color}),class:"activities_icon"},(0,r.toDisplayString)(e.icon_name),5),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.name),1),k])))),128))])])])),_:2},1032,["to"])))),128))])])):(0,r.createCommentVNode)("",!0),N.searchHistory.length&&N.showHistory?((0,r.openBlock)(),(0,r.createElementBlock)("section",g,[V,(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(N.searchHistory,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t,class:"history_list"},[(0,r.createElementVNode)("span",{class:"history_text ellipsis",onClick:t=>H.searchTarget(e)},(0,r.toDisplayString)(e),9,E),((0,r.openBlock)(),(0,r.createElementBlock)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"delete_icon",onClick:e=>H.deleteHistory(t)},B,8,_))])))),128))]),(0,r.createElementVNode)("footer",{class:"clear_history",onClick:t[3]||(t[3]=(...e)=>H.clearAllHistory&&H.clearAllHistory(...e))},"清空搜索历史")])):(0,r.createCommentVNode)("",!0),N.emptyResult?((0,r.openBlock)(),(0,r.createElementBlock)("div",w,"很抱歉！无搜索结果")):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(C)])}var f=s(8724),C=s(5284),x=s(6497),S=s(9120),A=s(2467);const F={data(){return{geohash:"",searchValue:"",restaurantList:[],imgBaseUrl:S.o8,searchHistory:[],showHistory:!0,emptyResult:!1}},created(){},mounted(){this.geohash=this.$route.params.geohash,(0,A.KA)("searchHistory")&&(this.searchHistory=JSON.parse((0,A.KA)("searchHistory")))},components:{headTop:f.A,footGuide:C.A},methods:{async searchTarget(e){if(e)this.searchValue=e;else if(!this.searchValue)return;this.showHistory=!1,this.restaurantList=await(0,x.mp)(this.geohash,this.searchValue),this.emptyResult=!this.restaurantList.length;let t=(0,A.KA)("searchHistory");if(t){let e=!1;this.searchHistory=JSON.parse(t),this.searchHistory.forEach((t=>{t==this.searchValue&&(e=!0)})),e||this.searchHistory.push(this.searchValue)}else this.searchHistory.push(this.searchValue);(0,A.k3)("searchHistory",this.searchHistory)},checkInput(){""===this.searchValue&&(this.showHistory=!0,this.restaurantList=[],this.emptyResult=!1)},deleteHistory(e){this.searchHistory.splice(e,1),(0,A.k3)("searchHistory",this.searchHistory)},clearAllHistory(){this.searchHistory=[],(0,A.k3)("searchHistory",this.searchHistory)}}};var L=s(4621);const D=(0,L.A)(F,[["render",v],["__scopeId","data-v-28445d52"]]),b=D}}]);
//# sourceMappingURL=654.3e88c6a6.js.map