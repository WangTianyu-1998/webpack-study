"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[749],{9102:(e,t,o)=>{o.d(t,{A:()=>p});var a=o(3060);const s=e=>((0,a.pushScopeId)("data-v-7a683c4e"),e=e(),(0,a.popScopeId)(),e),n={class:"alet_container"},r={class:"tip_text_container"},l=s((()=>(0,a.createElementVNode)("div",{class:"tip_icon"},[(0,a.createElementVNode)("span"),(0,a.createElementVNode)("span")],-1))),c={class:"tip_text"};function i(e,t,o,s,i,d){return(0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createElementVNode)("section",r,[l,(0,a.createElementVNode)("p",c,(0,a.toDisplayString)(o.alertText),1),(0,a.createElementVNode)("div",{class:"confrim",onClick:t[0]||(t[0]=(...e)=>d.closeTip&&d.closeTip(...e))},"确认")])])}const d={data(){return{positionY:0,timer:null}},mounted(){},props:["alertText"],methods:{closeTip(){this.$emit("closeTip")}}};var h=o(4621);const m=(0,h.A)(d,[["render",i],["__scopeId","data-v-7a683c4e"]]),p=m},2757:(e,t,o)=>{o.d(t,{A:()=>h});var a=o(3060);const s=e=>((0,a.pushScopeId)("data-v-32996121"),e=e(),(0,a.popScopeId)(),e),n={class:"loading_container"},r=s((()=>(0,a.createElementVNode)("svg",{class:"load_ellipse",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,a.createElementVNode)("ellipse",{cx:"26",cy:"10",rx:"26",ry:"10",style:{fill:"#ddd",stroke:"none"}})],-1)));function l(e,t,o,s,l,c){return(0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createElementVNode)("div",{class:"load_img",style:(0,a.normalizeStyle)({backgroundPositionY:-l.positionY%7*2.5+"rem"})},null,4),r])}const c={data(){return{positionY:0,timer:null}},mounted(){this.timer=setInterval((()=>{this.positionY++}),600)},beforeDestroy(){clearInterval(this.timer)}};var i=o(4621);const d=(0,i.A)(c,[["render",l],["__scopeId","data-v-32996121"]]),h=d},8724:(e,t,o)=>{o.d(t,{A:()=>g});var a=o(3060);const s=e=>((0,a.pushScopeId)("data-v-3a98f49d"),e=e(),(0,a.popScopeId)(),e),n={id:"head_top"},r=s((()=>(0,a.createElementVNode)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},[(0,a.createElementVNode)("polyline",{points:"12,18 4,9 12,0",style:{fill:"none",stroke:"rgb(255,255,255)","stroke-width":"2"}})],-1))),l=[r],c={key:0,class:"user_avatar"},i=s((()=>(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#user"},null,-1))),d=[i],h={key:1,class:"login_span"},m={key:2,class:"title_head ellipsis"},p={class:"title_text"};function u(e,t,o,s,r,i){const u=(0,a.resolveComponent)("router-link");return(0,a.openBlock)(),(0,a.createElementBlock)("header",n,[(0,a.renderSlot)(e.$slots,"logo",{},void 0,!0),(0,a.renderSlot)(e.$slots,"search",{},void 0,!0),o.goBack?((0,a.openBlock)(),(0,a.createElementBlock)("section",{key:0,class:"head_goback",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},l)):(0,a.createCommentVNode)("",!0),o.signinUp?((0,a.openBlock)(),(0,a.createBlock)(u,{key:1,to:e.userInfo?"/profile":"/login",class:"head_login"},{default:(0,a.withCtx)((()=>[e.userInfo?((0,a.openBlock)(),(0,a.createElementBlock)("svg",c,d)):((0,a.openBlock)(),(0,a.createElementBlock)("span",h,"登录|注册"))])),_:1},8,["to"])):(0,a.createCommentVNode)("",!0),o.headTitle?((0,a.openBlock)(),(0,a.createElementBlock)("section",m,[(0,a.createElementVNode)("span",p,(0,a.toDisplayString)(o.headTitle),1)])):(0,a.createCommentVNode)("",!0),(0,a.renderSlot)(e.$slots,"edit",{},void 0,!0),(0,a.renderSlot)(e.$slots,"msite-title",{},void 0,!0),(0,a.renderSlot)(e.$slots,"changecity",{},void 0,!0),(0,a.renderSlot)(e.$slots,"changeLogin",{},void 0,!0)])}var k=o(275);const _={data(){return{}},mounted(){this.getUserInfo()},props:["signinUp","headTitle","goBack"],computed:{...(0,k.mapState)(["userInfo"])},methods:{...(0,k.mapActions)(["getUserInfo"])}};var y=o(4621);const E=(0,y.A)(_,[["render",u],["__scopeId","data-v-3a98f49d"]]),g=E},1749:(e,t,o)=>{o.r(t),o.d(t,{default:()=>he});var a=o(3060);const s=e=>((0,a.pushScopeId)("data-v-634b5e96"),e=e(),(0,a.popScopeId)(),e),n={class:"confirmOrderContainer"},r={key:0},l={class:"address_empty_left"},c=s((()=>(0,a.createElementVNode)("svg",{class:"location_icon"},[(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#location"})],-1))),i={key:0,class:"add_address"},d={key:1,class:"address_detail_container"},h={class:"address_detail"},m=s((()=>(0,a.createElementVNode)("svg",{class:"address_empty_right"},[(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"})],-1))),p={class:"delivery_model container_style"},u=s((()=>(0,a.createElementVNode)("p",{class:"deliver_text"},"送达时间",-1))),k={class:"deliver_time"},_={key:0},y={class:"pay_way container_style"},E={class:"header_style"},g=s((()=>(0,a.createElementVNode)("span",null,"支付方式",-1))),V=s((()=>(0,a.createElementVNode)("span",null,"在线支付",-1))),N=s((()=>(0,a.createElementVNode)("svg",{class:"address_empty_right"},[(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"})],-1))),v=[V,N],f=s((()=>(0,a.createElementVNode)("section",{class:"hongbo"},[(0,a.createElementVNode)("span",null,"红包"),(0,a.createElementVNode)("span",null,"暂时只在饿了么 APP 中支持")],-1))),w={class:"food_list"},D={key:0},x=["src"],S={key:1,class:"food_list_ul"},B={class:"food_name ellipsis"},A={class:"num_price"},C={key:2,class:"food_item_style"},I={class:"food_name ellipsis"},T={class:"num_price"},O=s((()=>(0,a.createElementVNode)("span",null,null,-1))),P={class:"food_item_style"},b=s((()=>(0,a.createElementVNode)("p",{class:"food_name ellipsis"},"配送费",-1))),R={class:"num_price"},W=s((()=>(0,a.createElementVNode)("span",null,null,-1))),$={class:"food_item_style total_price"},L={class:"food_name ellipsis"},U={class:"num_price"},H={class:"pay_way container_style"},F=s((()=>(0,a.createElementVNode)("span",null,"订单备注",-1))),Y={class:"more_type"},q={class:"ellipsis"},j=s((()=>(0,a.createElementVNode)("svg",{class:"address_empty_right"},[(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"})],-1))),z=s((()=>(0,a.createElementVNode)("span",null,"发票抬头",-1))),G=s((()=>(0,a.createElementVNode)("svg",{class:"address_empty_right"},[(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"})],-1))),M={class:"confrim_order"},J={key:0,class:"choose_type_Container"},K=s((()=>(0,a.createElementVNode)("header",null,"支付方式",-1))),Q={key:0},X=["onClick"],Z=s((()=>(0,a.createElementVNode)("use",{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#select"},null,-1))),ee=[Z];function te(e,t,o,s,V,N){const Z=(0,a.resolveComponent)("head-top"),te=(0,a.resolveComponent)("router-link"),oe=(0,a.resolveComponent)("loading"),ae=(0,a.resolveComponent)("alert-tip"),se=(0,a.resolveComponent)("router-view");return(0,a.openBlock)(),(0,a.createElementBlock)("div",n,[V.showLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("section",r,[(0,a.createVNode)(Z,{"head-title":"确认订单",goBack:"true","signin-up":"confirmOrder"}),(0,a.createVNode)(te,{to:{path:"/confirmOrder/chooseAddress",query:{id:V.checkoutData.cart.id,sig:V.checkoutData.sig}},class:"address_container"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[c,e.choosedAddress?((0,a.openBlock)(),(0,a.createElementBlock)("div",d,[(0,a.createElementVNode)("header",null,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.choosedAddress.name),1),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(1==e.choosedAddress.sex?"先生":"女士"),1),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.choosedAddress.phone),1)]),(0,a.createElementVNode)("div",h,[e.choosedAddress.tag?((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:0,style:(0,a.normalizeStyle)({backgroundColor:N.iconColor(e.choosedAddress.tag)})},(0,a.toDisplayString)(e.choosedAddress.tag),5)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(e.choosedAddress.address_detail),1)])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",i,"请添加一个收货地址"))]),m])),_:1},8,["to"]),(0,a.createElementVNode)("section",p,[u,(0,a.createElementVNode)("section",k,[(0,a.createElementVNode)("p",null,"尽快送达 | 预计 "+(0,a.toDisplayString)(V.checkoutData.delivery_reach_time),1),V.checkoutData.cart.is_deliver_by_fengniao?((0,a.openBlock)(),(0,a.createElementBlock)("p",_,"蜂鸟专送")):(0,a.createCommentVNode)("",!0)])]),(0,a.createElementVNode)("section",y,[(0,a.createElementVNode)("header",E,[g,(0,a.createElementVNode)("div",{class:"more_type",onClick:t[0]||(t[0]=(...e)=>N.showPayWayFun&&N.showPayWayFun(...e))},v)]),f]),(0,a.createElementVNode)("section",w,[V.checkoutData.cart.restaurant_info?((0,a.openBlock)(),(0,a.createElementBlock)("header",D,[(0,a.createElementVNode)("img",{src:V.imgBaseUrl+V.checkoutData.cart.restaurant_info.image_path},null,8,x),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(V.checkoutData.cart.restaurant_info.name),1)])):(0,a.createCommentVNode)("",!0),V.checkoutData.cart.groups?((0,a.openBlock)(),(0,a.createElementBlock)("ul",S,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(V.checkoutData.cart.groups[0],(e=>((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:e.id,class:"food_item_style"},[(0,a.createElementVNode)("p",B,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("div",A,[(0,a.createElementVNode)("span",null,"x "+(0,a.toDisplayString)(e.quantity),1),(0,a.createElementVNode)("span",null,"¥"+(0,a.toDisplayString)(e.price),1)])])))),128))])):(0,a.createCommentVNode)("",!0),V.checkoutData.cart.extra?((0,a.openBlock)(),(0,a.createElementBlock)("div",C,[(0,a.createElementVNode)("p",I,(0,a.toDisplayString)(V.checkoutData.cart.extra[0].name),1),(0,a.createElementVNode)("div",T,[O,(0,a.createElementVNode)("span",null,"¥ "+(0,a.toDisplayString)(V.checkoutData.cart.extra[0].price),1)])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",P,[b,(0,a.createElementVNode)("div",R,[W,(0,a.createElementVNode)("span",null,"¥ "+(0,a.toDisplayString)(V.checkoutData.cart.deliver_amount||0),1)])]),(0,a.createElementVNode)("div",$,[(0,a.createElementVNode)("p",L,"订单 ¥"+(0,a.toDisplayString)(V.checkoutData.cart.total),1),(0,a.createElementVNode)("div",U,[(0,a.createElementVNode)("span",null,"待支付 ¥"+(0,a.toDisplayString)(V.checkoutData.cart.total),1)])])]),(0,a.createElementVNode)("section",H,[(0,a.createVNode)(te,{to:{path:"/confirmOrder/remark",query:{id:V.checkoutData.cart.id,sig:V.checkoutData.sig}},class:"header_style"},{default:(0,a.withCtx)((()=>[F,(0,a.createElementVNode)("div",Y,[(0,a.createElementVNode)("span",q,(0,a.toDisplayString)(e.remarkText||e.inputText?N.remarklist:"口味、偏好等"),1),j])])),_:1},8,["to"]),(0,a.createVNode)(te,{to:V.checkoutData.invoice.is_available?"/confirmOrder/invoice":"",class:(0,a.normalizeClass)(["hongbo",{support_is_available:V.checkoutData.invoice.is_available}])},{default:(0,a.withCtx)((()=>[z,(0,a.createElementVNode)("span",null,[(0,a.createTextVNode)((0,a.toDisplayString)(V.checkoutData.invoice.status_text)+" ",1),G])])),_:1},8,["to","class"])]),(0,a.createElementVNode)("section",M,[(0,a.createElementVNode)("p",null,"待支付 ¥"+(0,a.toDisplayString)(V.checkoutData.cart.total),1),(0,a.createElementVNode)("p",{onClick:t[1]||(t[1]=(...e)=>N.confrimOrder&&N.confrimOrder(...e))},"确认下单")]),(0,a.createVNode)(a.Transition,{name:"fade"},{default:(0,a.withCtx)((()=>[V.showPayWay?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"cover",onClick:t[2]||(t[2]=(...e)=>N.showPayWayFun&&N.showPayWayFun(...e))})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(a.Transition,{name:"slid_up"},{default:(0,a.withCtx)((()=>[V.showPayWay?((0,a.openBlock)(),(0,a.createElementBlock)("div",J,[K,(0,a.createElementVNode)("ul",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(V.checkoutData.payments,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:e.id,class:(0,a.normalizeClass)({choose:V.payWayId==e.id})},[(0,a.createElementVNode)("span",null,[(0,a.createTextVNode)((0,a.toDisplayString)(e.name),1),e.is_online_payment?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("span",Q,(0,a.toDisplayString)(e.description),1))]),((0,a.openBlock)(),(0,a.createElementBlock)("svg",{class:"address_empty_right",onClick:t=>N.choosePayWay(e.is_online_payment,e.id)},ee,8,X))],2)))),128))])])):(0,a.createCommentVNode)("",!0)])),_:1})])),V.showLoading?((0,a.openBlock)(),(0,a.createBlock)(oe,{key:1})):(0,a.createCommentVNode)("",!0),V.showAlert?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:2,onCloseTip:t[3]||(t[3]=e=>V.showAlert=!1),alertText:V.alertText},null,8,["alertText"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(a.Transition,{name:"router-slid",mode:"out-in"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(se)])),_:1})])}var oe=o(275),ae=o(8724),se=o(9102),ne=o(2757),re=o(6497),le=o(9120);const ce={data(){return{geohash:"",shopId:null,showLoading:!0,checkoutData:null,shopCart:null,imgBaseUrl:le.o8,showPayWay:!1,payWayId:1,showAlert:!1,alertText:null}},created(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.shopId,this.INIT_BUYCART(),this.SAVE_SHOPID(this.shopId),this.shopCart=this.cartList[this.shopId]},mounted(){this.geohash&&(this.initData(),this.SAVE_GEOHASH(this.geohash)),!this.userInfo||this.userInfo.user_id},components:{headTop:ae.A,alertTip:se.A,loading:ne.A},computed:{...(0,oe.mapState)(["cartList","remarkText","inputText","invoice","choosedAddress","userInfo"]),remarklist:function(){let e=new String;return this.remarkText&&Object.values(this.remarkText).forEach((t=>{e+=t[1]+"，"})),this.inputText?e+this.inputText:e.substr(0,e.lastIndexOf("，"))}},methods:{...(0,oe.mapMutations)(["INIT_BUYCART","SAVE_GEOHASH","CHOOSE_ADDRESS","NEED_VALIDATION","SAVE_CART_ID_SIG","SAVE_ORDER_PARAM","ORDER_SUCCESS","SAVE_SHOPID"]),async initData(){let e=new Array;Object.values(this.shopCart).forEach((t=>{Object.values(t).forEach((t=>{Object.values(t).forEach((t=>{e.push({attrs:[],extra:{},id:t.id,name:t.name,packing_fee:t.packing_fee,price:t.price,quantity:t.num,sku_id:t.sku_id,specs:[t.specs],stock:t.stock})}))}))})),this.checkoutData=await(0,re.Pt)(this.geohash,[e],this.shopId),this.SAVE_CART_ID_SIG({cart_id:this.checkoutData.cart.id,sig:this.checkoutData.sig}),this.initAddress(),this.showLoading=!1},async initAddress(){if(this.userInfo&&this.userInfo.user_id){const e=await(0,re.Re)(this.userInfo.user_id);e instanceof Array&&e.length&&this.CHOOSE_ADDRESS({address:e[0],index:0})}},showPayWayFun(){this.showPayWay=!this.showPayWay},choosePayWay(e,t){e&&(this.showPayWay=!this.showPayWay,this.payWayId=t)},iconColor(e){switch(e){case"公司":return"#4cd964";case"学校":return"#3190e8"}},async confrimOrder(){if(!this.userInfo||!this.userInfo.user_id)return this.showAlert=!0,void(this.alertText="请登录");if(!this.choosedAddress)return this.showAlert=!0,void(this.alertText="请添加一个收货地址");this.SAVE_ORDER_PARAM({user_id:this.userInfo.user_id,cart_id:this.checkoutData.cart.id,address_id:this.choosedAddress.id,description:this.remarklist,entities:this.checkoutData.cart.groups,geohash:this.geohash,sig:this.checkoutData.sig});let e=await(0,re.Js)(this.userInfo.user_id,this.checkoutData.cart.id,this.choosedAddress.id,this.remarklist,this.checkoutData.cart.groups,this.geohash,this.checkoutData.sig);e.need_validation?(this.NEED_VALIDATION(e),this.$router.push("/confirmOrder/userValidation")):(this.ORDER_SUCCESS(e),this.$router.push("/confirmOrder/payment"))}},watch:{userInfo:function(e){e&&e.user_id&&this.initAddress()}}};var ie=o(4621);const de=(0,ie.A)(ce,[["render",te],["__scopeId","data-v-634b5e96"]]),he=de}}]);
//# sourceMappingURL=749.474855e5.js.map